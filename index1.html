<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> çº¢è‰²æ—…æ¸¸å‰§æœ¬æ€ç³»ç»Ÿæ¶æ„ V4.0 </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Chosen Palette: "Revolutionary Tech" - Deep Red (#7f1d1d) for heritage, Slate (#1e293b) for technology, Amber (#f59e0b) for highlights. -->
    <!-- Application Structure Plan: 
         1. Vision Header: Immediate impact with 10k+ concurrency & SaaS goals.
         2. Interactive Architecture: 3-Layer diagram (Client/Server/Admin) that reveals details on click.
         3. Tech Simulation Labs:
            - Route Engine: Demonstrates the V4.0 Multi-role/Multi-route JSON logic.
            - LBS Team: Simulates V1.0 Team positioning & V2.0 Geo-fencing on Canvas.
            - AI Liaison: Simulates the "Revolutionary Liaison" (ex-Pet) and AI Photo Match.
         4. Full Feature Roadmap: A tabbed table view mapping Excel features (1.0-4.0) to the 3 implementation phases.
         This structure proves the architecture can handle the specific functional requirements.
    -->
    <!-- Visualization & Content Choices:
         - Charts: Used for system load (Line) and AI vector matching (Bar).
         - Canvas: Used for the LBS map simulation to show "Team Member" movement and radius triggering.
         - DOM Manipulation: Heavy use of JS to switch "Script Routes" dynamically, proving the V4.0 JSON structure flexibility.
         - NO SVG/Mermaid: All diagrams built with CSS Grid/Flex and Unicode icons.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');
        
        body { font-family: 'Noto Sans SC', sans-serif; background-color: #f8fafc; }
        
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%;
            height: 300px;
            max-height: 400px;
        }

        .retro-card {
            background: white;
            border-left: 4px solid #991b1b; /* Red-800 */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
        }

        .retro-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .tech-border {
            border: 1px solid #cbd5e1;
            border-radius: 0.5rem;
        }

        /* Console Log Animation */
        .console-window {
            background-color: #1e293b;
            color: #4ade80;
            font-family: monospace;
            height: 150px;
            overflow-y: auto;
            padding: 10px;
            font-size: 0.8rem;
            border-radius: 4px;
        }

        .phase-badge {
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }
        .bg-p1 { background-color: #dbeafe; color: #1e40af; } /* Phase 1 */
        .bg-p2 { background-color: #fae8ff; color: #86198f; } /* Phase 2 */
        .bg-p3 { background-color: #ffedd5; color: #9a3412; } /* Phase 3 */

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 3px; }
    </style>
</head>
<body class="text-slate-800">

    <!-- Top Navigation -->
    <nav class="bg-red-900 text-amber-50 sticky top-0 z-50 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center gap-3">
                    <span class="text-2xl">â˜…</span>
                    <h1 class="font-bold text-xl tracking-wider">æ²‰æµ¸å¼Â· æ™¯åŒºçº¢è‰²æ—…æ¸¸å‰§æœ¬æ€æ¶æ„æ–¹æ¡ˆ V4.0</h1>
                </div>
                <div class="hidden md:flex space-x-8 text-sm font-medium">
                    <a href="#overview" class="hover:text-white transition">æˆ˜ç•¥æ€»è§ˆ</a>
                    <a href="#labs" class="hover:text-white transition">æ ¸å¿ƒå¼•æ“å®éªŒå®¤</a>
                    <a href="#roadmap" class="hover:text-white transition">å…¨é‡åŠŸèƒ½è½åœ°è¡¨</a>
                    <a href="#business" class="hover:text-white transition">SaaSå•†ä¸šæ¨¡å‹</a>
                </div>
                <div class="text-xs bg-red-800 px-3 py-1 rounded-full border border-red-700">
                    System Status: <span class="text-green-400 font-bold">ONLINE</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">

        <!-- Section 1: Strategic Overview -->
        <section id="overview" class="animate-fade-in">
            <div class="mb-6">
                <h2 class="text-3xl font-bold text-slate-900 flex items-center gap-2">
                    <span class="text-red-700">â–</span> æˆ˜ç•¥æ€»è§ˆ (Strategic Overview)
                </h2>
                <p class="mt-2 text-slate-600 max-w-4xl">
                    æœ¬æ¶æ„æ–¹æ¡ˆ (V4.0) æ—¨åœ¨æ„å»ºä¸€ä¸ªæ”¯æŒ <strong>10,000+ å¹¶å‘</strong> çš„ SaaS çº§å®æ™¯å‰§æœ¬æ€å¹³å°ã€‚
                    å®ƒå®Œå…¨æ•´åˆäº†ä» Excel åŠŸèƒ½æ¸…å• 1.0 åˆ° 4.0 çš„æ‰€æœ‰éœ€æ±‚ï¼Œå®ç°äº†ä»â€œå•äººé—¯å…³â€åˆ°â€œå¤šç§Ÿæˆ·ç”Ÿæ€â€çš„å®Œæ•´é—­ç¯ã€‚
                    æ ¸å¿ƒåœ¨äºè§£å†³ LBS ç²¾å‡†å®šä½ã€å¤šè§’è‰²å¤šè·¯çº¿å™äº‹ã€ä»¥åŠæ··åˆå•†ä¸šæ¨¡å¼å˜ç°ã€‚
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <div class="retro-card p-6 rounded-lg">
                    <div class="text-slate-500 text-sm font-bold uppercase">æœ€å¤§å¹¶å‘æ‰¿è½½</div>
                    <div class="text-4xl font-extrabold text-red-700 mt-2">10,000+</div>
                    <div class="text-xs text-slate-400 mt-1">å¾®æœåŠ¡æ¶æ„ / Redisé›†ç¾¤</div>
                </div>
                <div class="retro-card p-6 rounded-lg">
                    <div class="text-slate-500 text-sm font-bold uppercase">åŠŸèƒ½è¦†ç›–ç‡</div>
                    <div class="text-4xl font-extrabold text-blue-700 mt-2">100%</div>
                    <div class="text-xs text-slate-400 mt-1">æ•´åˆæ¸…å• 1.0 - 4.0</div>
                </div>
                <div class="retro-card p-6 rounded-lg">
                    <div class="text-slate-500 text-sm font-bold uppercase">æ•°æ®æŒä¹…æ€§</div>
                    <div class="text-4xl font-extrabold text-amber-600 mt-2">SaaS</div>
                    <div class="text-xs text-slate-400 mt-1">å¤šç§Ÿæˆ· / äº‘ç«¯å­˜æ¡£</div>
                </div>
                <div class="retro-card p-6 rounded-lg">
                    <div class="text-slate-500 text-sm font-bold uppercase">å¤šåª’ä½“å¼•æ“</div>
                    <div class="text-4xl font-extrabold text-green-700 mt-2">V4.0</div>
                    <div class="text-xs text-slate-400 mt-1">è§†é¢‘èƒŒæ™¯ / å¤šè·¯çº¿ / æ—ç™½</div>
                </div>
            </div>
        </section>

        <!-- Section 2: Architecture Diagram (Interactive) -->
        <section id="architecture">
            <h2 class="text-2xl font-bold text-slate-900 flex items-center gap-2 mb-4">
                <span class="text-red-700">â–</span> V4.0 å…¨æ™¯æ¶æ„ (System Architecture)
            </h2>
            <p class="mb-6 text-slate-600">ç‚¹å‡»ä¸‹æ–¹æ¨¡å—æŸ¥çœ‹æŠ€æœ¯ç»†èŠ‚ã€‚ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–å•ä½“è®¾è®¡ï¼Œåˆ†ä¸ºå®¢æˆ·ç«¯ã€æœåŠ¡ç«¯ä¸ç®¡ç†ç«¯ã€‚</p>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Client Layer -->
                <div class="bg-white p-4 rounded shadow border-t-4 border-blue-500">
                    <h3 class="font-bold text-lg mb-3 flex justify-between">
                        å®¢æˆ·ç«¯ (Mini Program) <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">å‰ç«¯</span>
                    </h3>
                    <div class="space-y-2">
                        <div class="p-2 bg-slate-50 border rounded text-sm hover:bg-blue-50 cursor-pointer transition" onclick="logConsole('LBS Engine: Tencent Map SDK + Team Marker Rendering initialized.')">
                            <span class="font-bold">ğŸŒ LBS åœ°ç†å¼•æ“</span><br>
                            <span class="text-xs text-slate-500">è…¾è®¯åœ°å›¾SDK / é˜Ÿå‹ä½ç½®å…±äº« (WebSocket)</span>
                        </div>
                        <div class="p-2 bg-slate-50 border rounded text-sm hover:bg-blue-50 cursor-pointer transition" onclick="logConsole('Script Engine V4: Loaded Narrative/Dialogue modes & Video background support.')">
                            <span class="font-bold">ğŸ¬ å¤šåª’ä½“å‰§æœ¬å¼•æ“ V4</span><br>
                            <span class="text-xs text-slate-500">å™äº‹/å¯¹è¯æ¨¡å¼ / è§†é¢‘èƒŒæ™¯ / è”ç»œå‘˜</span>
                        </div>
                        <div class="p-2 bg-slate-50 border rounded text-sm hover:bg-blue-50 cursor-pointer transition" onclick="logConsole('Interaction: AI Camera & Hardware (NFC/Bluetooth) ready.')">
                            <span class="font-bold">ğŸ® äº’åŠ¨æ¨¡å—</span><br>
                            <span class="text-xs text-slate-500">AIæ‹ç…§ / ç¡¬ä»¶ / H5å°æ¸¸æˆ / èƒŒå›Š</span>
                        </div>
                    </div>
                </div>

                <!-- Server Layer -->
                <div class="bg-white p-4 rounded shadow border-t-4 border-red-500">
                    <h3 class="font-bold text-lg mb-3 flex justify-between">
                        æœåŠ¡ç«¯ (Backend) <span class="text-xs bg-red-100 text-red-800 px-2 py-1 rounded">æ ¸å¿ƒ</span>
                    </h3>
                    <div class="space-y-2">
                        <div class="p-2 bg-slate-50 border rounded text-sm hover:bg-red-50 cursor-pointer transition" onclick="logConsole('Route Service: Dispatching Role-based JSON chain based on User Selection.')">
                            <span class="font-bold">ğŸ”€ å‰§æœ¬è·¯ç”±æœåŠ¡</span><br>
                            <span class="text-xs text-slate-500">å¤šè§’è‰²å¤šè·¯çº¿åˆ†å‘ / æ·±åº¦å¤åˆ¶ç®—æ³•</span>
                        </div>
                        <div class="p-2 bg-slate-50 border rounded text-sm hover:bg-red-50 cursor-pointer transition" onclick="logConsole('SaaS Center: Tenant ID checked. SKU validity verified.')">
                            <span class="font-bold">ğŸ’° å•†ä¸šæƒç›Šä¸­å¿ƒ</span><br>
                            <span class="text-xs text-slate-500">SKUå†…è´­ / é—¨ç¥¨æ ¸é”€ / æœ‰æ•ˆæœŸæ§åˆ¶</span>
                        </div>
                        <div class="p-2 bg-slate-50 border rounded text-sm hover:bg-red-50 cursor-pointer transition" onclick="logConsole('Game Gateway: Broadcasting POS_UPDATE to Room #888.')">
                            <span class="font-bold">ğŸ“¡ æ¸¸æˆç½‘å…³</span><br>
                            <span class="text-xs text-slate-500">WebSocket / å®æ—¶ä½ç½® / çŠ¶æ€åŒæ­¥</span>
                        </div>
                    </div>
                </div>

                <!-- Admin Layer -->
                <div class="bg-white p-4 rounded shadow border-t-4 border-amber-500">
                    <h3 class="font-bold text-lg mb-3 flex justify-between">
                        ç®¡ç†ç«¯ (SaaS Admin) <span class="text-xs bg-amber-100 text-amber-800 px-2 py-1 rounded">è¿è¥</span>
                    </h3>
                    <div class="space-y-2">
                        <div class="p-2 bg-slate-50 border rounded text-sm hover:bg-amber-50 cursor-pointer transition" onclick="logConsole('Editor: Deep Copy triggered. Cloned Route A to Route B.')">
                            <span class="font-bold">âœï¸ å¯è§†åŒ–ç¼–è¾‘å™¨</span><br>
                            <span class="text-xs text-slate-500">å‰ç½®/åç½®æ—ç™½é…ç½® / è·¯çº¿å¤åˆ¶</span>
                        </div>
                        <div class="p-2 bg-slate-50 border rounded text-sm hover:bg-amber-50 cursor-pointer transition" onclick="logConsole('Ops: Monitoring Tenant #1002 data flow.')">
                            <span class="font-bold">ğŸ“Š è¿è¥ä¸­å¿ƒ</span><br>
                            <span class="text-xs text-slate-500">å¤šç§Ÿæˆ·ç®¡ç† / æ ¸é”€è®°å½• / æˆ˜é˜Ÿç›‘æ§</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Simulated Console -->
            <div class="mt-4">
                <div class="bg-slate-800 text-slate-400 text-xs px-2 py-1 rounded-t w-32">System Log</div>
                <div id="console-output" class="console-window">
                    > System initialized...<br>
                    > Waiting for user interaction...
                </div>
            </div>
        </section>

        <!-- Section 3: Core Engine Labs (The Complex Logic) -->
        <section id="labs">
            <h2 class="text-2xl font-bold text-slate-900 flex items-center gap-2 mb-6">
                <span class="text-red-700">â–</span> æ ¸å¿ƒå¼•æ“å®éªŒå®¤ (Core Engine Labs)
            </h2>
            <p class="mb-6 text-slate-600">æœ¬åŒºåŸŸæ¨¡æ‹Ÿæ¶æ„ä¸­æŠ€æœ¯éš¾åº¦æœ€é«˜çš„ä¸‰ä¸ªæ¨¡å—ï¼šå¤šè·¯çº¿å‰§æœ¬å¼•æ“ (V4.0)ã€LBS ç»„é˜ŸååŒ (V1.0) ä»¥åŠ AI è”ç»œå‘˜ç³»ç»Ÿ (V2.0)ã€‚</p>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                
                <!-- Lab A: Script Route Engine -->
                <div class="bg-white p-6 rounded-xl shadow-lg border border-slate-200">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-lg text-red-900">A. å¤šè§’è‰²å¤šè·¯çº¿å¼•æ“ (V4.0)</h3>
                        <span class="text-xs bg-slate-100 px-2 py-1 rounded">JSON Visualize</span>
                    </div>
                    <div class="mb-4">
                        <label class="text-sm font-semibold text-slate-700">é€‰æ‹©è§’è‰² (è§¦å‘ä¸åŒ JSON):</label>
                        <div class="flex gap-2 mt-2">
                            <button onclick="loadScript('scout')" class="px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition">ä¾¦å¯Ÿå‘˜ (Role A)</button>
                            <button onclick="loadScript('medic')" class="px-4 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition">å«ç”Ÿå‘˜ (Role B)</button>
                        </div>
                    </div>
                    <div class="bg-slate-900 text-green-400 font-mono text-xs p-4 rounded h-64 overflow-auto" id="json-viewer">
                        // ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹ V4.0 å·®å¼‚åŒ–æ•°æ®ç»“æ„
                        { "status": "waiting_for_selection" }
                    </div>
                    <div class="mt-2 text-xs text-slate-500">
                        * V4.0 ç‰¹æ€§ï¼šæ”¯æŒè§†é¢‘èƒŒæ™¯ (bg_type: VIDEO)ã€å‰ç½®/åç½®æ—ç™½ (Pre/Post Narrative) ä»¥åŠé¢˜ç›®ç»‘å®šã€‚
                    </div>
                </div>

                <!-- Lab B: LBS & AI Liaison -->
                <div class="space-y-6">
                    <!-- LBS Map Sim -->
                    <div class="bg-white p-6 rounded-xl shadow-lg border border-slate-200">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="font-bold text-lg text-red-900">B. LBS æˆ˜é˜Ÿä¸å›´æ  (V1.0/V2.0)</h3>
                            <button onclick="toggleTeam()" class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200">å¼€å¯ç»„é˜Ÿæ¨¡å¼</button>
                        </div>
                        <div class="relative w-full h-48 bg-slate-100 rounded border border-slate-300 overflow-hidden">
                            <canvas id="lbsCanvas" class="w-full h-full"></canvas>
                            <div class="absolute top-2 left-2 text-xs bg-white/80 p-1 rounded">
                                Distance: <span id="dist-display">0</span>m
                            </div>
                        </div>
                        <p class="text-xs text-slate-500 mt-2">
                            * ç»¿è‰²åœ†åœˆï¼šåœ°ç†å›´æ ã€‚è“è‰²ç‚¹ï¼šç©å®¶ã€‚çº¢è‰²ç‚¹ï¼šé˜Ÿå‹(WebSocketåŒæ­¥)ã€‚è¿›å…¥åœ†åœˆè§¦å‘ä»»åŠ¡ã€‚
                        </p>
                    </div>

                    <!-- AI Liaison Sim -->
                    <div class="bg-white p-6 rounded-xl shadow-lg border border-slate-200">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="font-bold text-lg text-red-900">C. é©å‘½è”ç»œå‘˜ & AI (V1.0/V2.0)</h3>
                        </div>
                        <div class="flex items-start gap-4">
                            <div class="w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center text-3xl border-2 border-amber-300 relative group cursor-pointer" onclick="triggerLiaison()">
                                ğŸº
                                <span class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping"></span>
                            </div>
                            <div class="flex-1">
                                <div id="liaison-msg" class="bg-amber-50 p-3 rounded text-sm text-amber-900 border border-amber-200">
                                    ç‚¹å‡»å·¦ä¾§â€œå°å·æ‰‹â€å¤´åƒï¼Œæ¥æ”¶ç»„ç»‡å‘æ¥çš„çº¿ç´¢ç”µæŠ¥...
                                </div>
                                <div class="mt-3 flex items-center gap-2">
                                    <button onclick="simPhotoMatch()" class="px-3 py-1 bg-slate-200 text-slate-700 text-xs rounded hover:bg-slate-300">ğŸ“¸ æ¨¡æ‹Ÿæ‹ç…§ä¸Šä¼ </button>
                                    <div class="h-2 w-32 bg-slate-200 rounded overflow-hidden">
                                        <div id="match-bar" class="h-full bg-green-500 w-0 transition-all duration-1000"></div>
                                    </div>
                                    <span id="match-score" class="text-xs font-bold text-slate-600">0%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Roadmap (The Excel Integration) -->
        <section id="roadmap">
            <h2 class="text-2xl font-bold text-slate-900 flex items-center gap-2 mb-6">
                <span class="text-red-700">â–</span> V4.0 å…¨é‡åŠŸèƒ½è½åœ°è¡¨ (Full Feature Roadmap)
            </h2>
            <p class="mb-6 text-slate-600">
                æœ¬è¡¨ä¸¥æ ¼å¯¹åº”ã€Šæ¼«äº‘ç§‘æŠ€å‰§æœ¬æ€åŠŸèƒ½æ¸…å•4.0ã€‹ï¼Œå°†æ‰€æœ‰éœ€æ±‚ï¼ˆ1.0åŸºç¡€åˆ°4.0å¤šè·¯çº¿ï¼‰æ‹†è§£ä¸ºä¸‰ä¸ªè½åœ°é˜¶æ®µã€‚
            </p>

            <div class="bg-white shadow rounded-lg overflow-hidden border border-slate-200">
                <div class="overflow-x-auto">
                    <table class="min-w-full text-sm text-left">
                        <thead class="bg-slate-100 text-slate-700 uppercase font-bold">
                            <tr>
                                <th class="px-6 py-3">é˜¶æ®µ (Phase)</th>
                                <th class="px-6 py-3">æ ¸å¿ƒæ¨¡å—</th>
                                <th class="px-6 py-3">å¯¹åº” Excel åŠŸèƒ½ç‚¹è¯¦æƒ…</th>
                                <th class="px-6 py-3">æŠ€æœ¯å®ç°è·¯å¾„</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-200">
                            <!-- Phase 1 -->
                            <tr class="bg-blue-50/30">
                                <td class="px-6 py-4 font-bold text-blue-800 border-r border-slate-200" rowspan="4">
                                    <span class="bg-p1">ç¬¬ä¸€é˜¶æ®µ: MVP</span><br>
                                    <span class="text-xs font-normal text-slate-500">å•äºº / å¤šè·¯çº¿ / åŸºç¡€äº’åŠ¨</span>
                                </td>
                                <td class="px-6 py-4 font-semibold">è§’è‰²ä¸è”ç»œå‘˜</td>
                                <td class="px-6 py-4">
                                    <ul class="list-disc pl-4 space-y-1 text-slate-600">
                                        <li>å¾®ä¿¡æˆæƒ / æ‰‹æœºç»‘å®š (v1.0)</li>
                                        <li><strong>é€‰æ‹©é©å‘½è”ç»œå‘˜</strong> (åŸé€‰æ‹©å® ç‰© v1.0)</li>
                                        <li>å›¾æ–‡è¯­éŸ³å¼•å¯¼ NPC (v1.0)</li>
                                    </ul>
                                </td>
                                <td class="px-6 py-4 text-slate-500">UIæ”¹é€ ï¼šå® ç‰©->å°å·æ‰‹/é€šè®¯å‘˜ï¼›åŸºç¡€Userè¡¨æ„å»ºã€‚</td>
                            </tr>
                            <tr class="bg-blue-50/30">
                                <td class="px-6 py-4 font-semibold">å‰§æœ¬å¼•æ“ V4</td>
                                <td class="px-6 py-4">
                                    <ul class="list-disc pl-4 space-y-1 text-slate-600">
                                        <li><strong>å¤šè·¯çº¿ç³»ç»Ÿ</strong> (ç»‘å®šä¸åŒè§’è‰² v4.0)</li>
                                        <li><strong>å™äº‹/å¯¹è¯æ—ç™½</strong> (v4.0)</li>
                                        <li><strong>è§†é¢‘èƒŒæ™¯</strong> / å›¾ç‰‡èƒŒæ™¯ (v4.0)</li>
                                        <li>é¢˜ç›®å‰ç½®/åç½®æ—ç™½ (v4.0)</li>
                                    </ul>
                                </td>
                                <td class="px-6 py-4 text-slate-500">JSONé“¾è¡¨ç»“æ„ï¼›è§†é¢‘æµåª’ä½“é¢„åŠ è½½ï¼›RouteServiceè·¯ç”±åˆ†å‘ã€‚</td>
                            </tr>
                            <tr class="bg-blue-50/30">
                                <td class="px-6 py-4 font-semibold">ä»»åŠ¡äº¤äº’</td>
                                <td class="px-6 py-4">
                                    <ul class="list-disc pl-4 space-y-1 text-slate-600">
                                        <li>æ‰«ç æ¿€æ´»è·¯çº¿ / GPSæ‰“å¡ (v1.0)</li>
                                        <li><strong>è”ç»œå‘˜æç¤º</strong> (åŸå® ç‰©æç¤º v1.0)</li>
                                        <li>è¡Œå†›èƒŒå›Š (èƒŒåŒ…) / ç¢ç‰‡åˆæˆå®ç®± (v1.0)</li>
                                    </ul>
                                </td>
                                <td class="px-6 py-4 text-slate-500">LBSè§¦å‘å™¨ï¼›LottieåŠ¨æ•ˆ(å¼€å®ç®±)ï¼›é“å…·çŠ¶æ€æœºã€‚</td>
                            </tr>
                            <tr class="bg-blue-50/30">
                                <td class="px-6 py-4 font-semibold">åå°ç®¡ç†</td>
                                <td class="px-6 py-4">
                                    <ul class="list-disc pl-4 space-y-1 text-slate-600">
                                        <li><strong>æ´»åŠ¨è·¯çº¿å¤åˆ¶</strong> (v4.0)</li>
                                        <li>é¢˜ç›®ä¸å…³å¡é…ç½® (v4.0)</li>
                                    </ul>
                                </td>
                                <td class="px-6 py-4 text-slate-500">å®ç° Deep Copy æ¥å£ (å¤åˆ¶Route+Tasks+Roles)ã€‚</td>
                            </tr>

                            <!-- Phase 2 -->
                            <tr class="bg-purple-50/30">
                                <td class="px-6 py-4 font-bold text-purple-800 border-r border-slate-200" rowspan="2">
                                    <span class="bg-p2">ç¬¬äºŒé˜¶æ®µ: ç¤¾äº¤</span><br>
                                    <span class="text-xs font-normal text-slate-500">ç»„é˜Ÿ / AI / ç¡¬ä»¶</span>
                                </td>
                                <td class="px-6 py-4 font-semibold">ç¤¾äº¤ç³»ç»Ÿ</td>
                                <td class="px-6 py-4">
                                    <ul class="list-disc pl-4 space-y-1 text-slate-600">
                                        <li><strong>ç»„é˜Ÿé—¯å…³ / å¯†ç åŠ å…¥</strong> (v1.0)</li>
                                        <li><strong>æˆ˜é˜Ÿä½ç½®å®æ—¶å…±äº«</strong> (v1.0)</li>
                                        <li>å¹³å‡åˆ†ç§¯åˆ†è®¡ç®— (v1.0)</li>
                                    </ul>
                                </td>
                                <td class="px-6 py-4 text-slate-500">WebSocketæœåŠ¡æ­å»ºï¼›Redis Geoç¼“å­˜ï¼›èšåˆè®¡ç®—ç­–ç•¥ã€‚</td>
                            </tr>
                            <tr class="bg-purple-50/30">
                                <td class="px-6 py-4 font-semibold">é«˜çº§äº’åŠ¨</td>
                                <td class="px-6 py-4">
                                    <ul class="list-disc pl-4 space-y-1 text-slate-600">
                                        <li><strong>AI æ‹ç…§è¯†åˆ«</strong> (v2.0)</li>
                                        <li>è“ç‰™/NFC ä»»åŠ¡ (v2.0)</li>
                                        <li>H5 å°æ¸¸æˆ (æ‹¼å›¾/æ‰¾èŒ¬ v2.0)</li>
                                        <li>SOS ä¸€é”®æ±‚åŠ© (v2.0)</li>
                                    </ul>
                                </td>
                                <td class="px-6 py-4 text-slate-500">å›¾åƒå‘é‡æ£€ç´¢æœåŠ¡ï¼›å¾®ä¿¡ç¡¬ä»¶JS-SDKï¼›WebViewåµŒå…¥ã€‚</td>
                            </tr>

                            <!-- Phase 3 -->
                            <tr class="bg-amber-50/30">
                                <td class="px-6 py-4 font-bold text-amber-800 border-r border-slate-200" rowspan="2">
                                    <span class="bg-p3">ç¬¬ä¸‰é˜¶æ®µ: SaaS</span><br>
                                    <span class="text-xs font-normal text-slate-500">Bç«¯ / æ ¸é”€ / å¤šç§Ÿæˆ·</span>
                                </td>
                                <td class="px-6 py-4 font-semibold">æ ¸é”€ä¸å‘¨è¾¹</td>
                                <td class="px-6 py-4">
                                    <ul class="list-disc pl-4 space-y-1 text-slate-600">
                                        <li><strong>äºŒç»´ç æ ¸é”€ç³»ç»Ÿ</strong> (v2.0)</li>
                                        <li>æ¨èæ™¯ç‚¹ / é™„è¿‘ç¾é£Ÿ (v2.0)</li>
                                        <li>æ•°æ®æ’è¡Œæ¦œ (v1.0)</li>
                                    </ul>
                                </td>
                                <td class="px-6 py-4 text-slate-500">Bç«¯æ‰«ç æªé€»è¾‘ï¼›LBS POIæ£€ç´¢æ¥å£ã€‚</td>
                            </tr>
                            <tr class="bg-amber-50/30">
                                <td class="px-6 py-4 font-semibold">SaaS èƒ½åŠ›</td>
                                <td class="px-6 py-4">
                                    <ul class="list-disc pl-4 space-y-1 text-slate-600">
                                        <li><strong>å¼€æ”¾ç©ºç™½è´¦å· (å¤šç§Ÿæˆ·)</strong> (v2.3)</li>
                                        <li>ç‹¬ç«‹ä»˜è´¹ä¸å­˜æ¡£ä½“ç³» (v2.3)</li>
                                    </ul>
                                </td>
                                <td class="px-6 py-4 text-slate-500">Tenant_ID æ•°æ®åº“éš”ç¦»ï¼›SKU è®¡è´¹å¼•æ“ã€‚</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Section 5: Business Model -->
        <section id="business" class="pb-12">
            <h2 class="text-2xl font-bold text-slate-900 flex items-center gap-2 mb-6">
                <span class="text-red-700">â–</span> SaaS æ··åˆå•†ä¸šæ¨¡å‹ (Business Model)
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div class="space-y-4">
                    <p class="text-slate-600">
                        æ¶æ„ V2.3/2.4 å¼•å…¥äº†çµæ´»çš„å•†ä¸šå˜ç°èƒ½åŠ›ï¼Œæ”¯æŒä»å•ä¸€é—¨ç¥¨åˆ°é•¿æœŸè¿è¥çš„è½¬å˜ã€‚
                    </p>
                    <ul class="space-y-3">
                        <li class="flex items-start">
                            <span class="text-red-600 mr-2">â—</span>
                            <div>
                                <strong class="text-slate-900">é—¨ç¥¨æƒç›Š (Ticket Asset):</strong>
                                <span class="text-slate-500 text-sm block">åŒ…å«1æ¬¡å…è´¹é€‰è§’æœºä¼šã€‚æ¿€æ´»åç”Ÿæˆ Binding è®°å½•ï¼Œé»˜è®¤30å¤©æœ‰æ•ˆæœŸ (TTL)ã€‚</span>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="text-blue-600 mr-2">â—</span>
                            <div>
                                <strong class="text-slate-900">SKU å†…è´­ (In-App Purchase):</strong>
                                <span class="text-slate-500 text-sm block">è§£é”é¢å¤–è§’è‰²æˆ–å‰§æœ¬éœ€å•ç‹¬ä»˜è´¹ã€‚æ”¯æŒâ€œå…¨è§’è‰²è§£é”åŒ…â€ç­‰æ‰“åŒ…ç­–ç•¥ã€‚</span>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="text-amber-600 mr-2">â—</span>
                            <div>
                                <strong class="text-slate-900">SaaS å¤šç§Ÿæˆ· (Multi-Tenancy):</strong>
                                <span class="text-slate-500 text-sm block">å¼€æ”¾ç©ºç™½è´¦å·ç»™åˆä½œæ™¯åŒºã€‚æ”¯æŒâ€œä¹°æ–­â€ã€â€œè®¢é˜…â€æˆ–â€œæŒ‰æ ¸é”€æ¬¡æ•°â€è®¡è´¹ã€‚</span>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded-xl shadow border border-slate-200">
                    <h3 class="font-bold text-center mb-4 text-sm uppercase text-slate-500">é¢„ä¼°æ”¶å…¥ç»“æ„</h3>
                    <div class="chart-container mx-auto">
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-900 text-slate-400 py-8 border-t border-slate-800">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="font-mono text-lg text-slate-200 mb-2">ä¸‹ä¸€ä¸ª1000W</p>
            <p class="text-xs">çº¢è‰²æ—…æ¸¸å‰§æœ¬æ€ç³»ç»Ÿæ¶æ„ V4.0 | Â© 2025</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- 1. Console Logger ---
        function logConsole(msg) {
            const consoleEl = document.getElementById('console-output');
            const time = new Date().toLocaleTimeString();
            consoleEl.innerHTML += `<div><span class="text-slate-500">[${time}]</span> ${msg}</div>`;
            consoleEl.scrollTop = consoleEl.scrollHeight;
        }

        // --- 2. Script Engine Lab (V4.0 Logic) ---
        function loadScript(role) {
            const viewer = document.getElementById('json-viewer');
            let data = {};
            
            if (role === 'scout') {
                data = {
                    "role_id": "role_scout_01",
                    "role_name": "ä¾¦å¯Ÿå‘˜",
                    "stage_list": [
                        {
                            "stage_id": 101,
                            "trigger": { "type": "GPS", "lat": 29.5, "lng": 106.5 },
                            "pre_narrative": [
                                { "type": "DIALOGUE", "speaker": "npc_villager", "bg_type": "VIDEO", "content": "å‰é¢ç¢‰å ¡ç«åŠ›å¤ªçŒ›ï¼" }
                            ],
                            "task": { "type": "PHOTO_AI", "hint": "å°å·æ‰‹æç¤º: æ‹æ‘„å°„å‡»å­”" },
                            "post_narrative": [ { "type": "MONOLOGUE", "content": "ä½ç½®å·²è®°å½•ã€‚" } ]
                        }
                    ]
                };
                logConsole('ScriptEngine: Loaded [Scout] route. Video BG pre-loading...');
            } else {
                data = {
                    "role_id": "role_medic_01",
                    "role_name": "å«ç”Ÿå‘˜",
                    "stage_list": [
                        {
                            "stage_id": 201,
                            "trigger": { "type": "NFC", "tag_id": "med_tent" },
                            "pre_narrative": [
                                { "type": "MONOLOGUE", "bg_type": "IMAGE", "content": "ä¼¤å‘˜æ€¥éœ€æ­¢è¡€è‰è¯ã€‚" }
                            ],
                            "task": { "type": "H5_GAME", "game_id": "puzzle_herb", "hint": "é€šè®¯å‘˜æç¤º: æ‹¼å‡ºè‰è¯å›¾" },
                            "post_narrative": [ { "type": "DIALOGUE", "speaker": "npc_soldier", "content": "è°¢è°¢ä½ ï¼ŒåŒå¿—ï¼" } ]
                        }
                    ]
                };
                logConsole('ScriptEngine: Loaded [Medic] route. NFC module ready.');
            }
            
            viewer.innerHTML = JSON.stringify(data, null, 2).replace(/ /g, '&nbsp;').replace(/\n/g, '<br>');
        }

        // --- 3. LBS & Team Lab (Canvas) ---
        const canvas = document.getElementById('lbsCanvas');
        const ctx = canvas.getContext('2d');
        let animationId;
        let userPos = { x: 50, y: 50 };
        const targetPos = { x: 200, y: 100, r: 40 };
        let teammates = [];
        let isTeamMode = false;

        // Resize canvas
        canvas.width = canvas.parentElement.offsetWidth;
        canvas.height = canvas.parentElement.offsetHeight;

        function drawLBS() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw Geofence Target
            ctx.beginPath();
            ctx.arc(targetPos.x, targetPos.y, targetPos.r, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(34, 197, 94, 0.2)'; // Green
            ctx.fill();
            ctx.strokeStyle = '#22c55e';
            ctx.stroke();
            ctx.fillStyle = '#15803d';
            ctx.font = '10px Arial';
            ctx.fillText('ä»»åŠ¡ç‚¹ (Radius 40m)', targetPos.x - 40, targetPos.y - 45);

            // Move User
            userPos.x += 0.5;
            if (userPos.x > canvas.width) userPos.x = 0;
            
            // Draw User
            ctx.beginPath();
            ctx.arc(userPos.x, userPos.y, 6, 0, Math.PI * 2);
            ctx.fillStyle = '#3b82f6'; // Blue
            ctx.fill();
            ctx.fillText('æˆ‘', userPos.x - 5, userPos.y - 10);

            // Distance Calc
            const dist = Math.sqrt(Math.pow(userPos.x - targetPos.x, 2) + Math.pow(userPos.y - targetPos.y, 2));
            document.getElementById('dist-display').innerText = Math.round(dist);
            
            if (dist < targetPos.r) {
                ctx.fillStyle = 'red';
                ctx.fillText('âš¡ TRIGGERED', targetPos.x - 20, targetPos.y + 5);
                if(Math.random() > 0.98) logConsole(`LBS: Entered Geofence. Dist: ${Math.round(dist)}m`);
            }

            // Team Mode
            if (isTeamMode) {
                teammates.forEach(tm => {
                    tm.x += (Math.random() - 0.5) * 2; // Jitter
                    ctx.beginPath();
                    ctx.arc(tm.x, tm.y, 6, 0, Math.PI * 2);
                    ctx.fillStyle = '#ef4444'; // Red
                    ctx.fill();
                    ctx.fillText('é˜Ÿå‹', tm.x - 10, tm.y - 10);
                });
            }

            animationId = requestAnimationFrame(drawLBS);
        }

        function toggleTeam() {
            isTeamMode = !isTeamMode;
            if (isTeamMode) {
                teammates = [
                    { x: 150, y: 120 },
                    { x: 220, y: 80 }
                ];
                logConsole('WebSocket: Connected to Room #888. Receiving pos data...');
            } else {
                teammates = [];
                logConsole('WebSocket: Disconnected.');
            }
        }

        drawLBS(); // Start animation

        // --- 4. AI Liaison Logic ---
        function triggerLiaison() {
            const msgs = [
                "ğŸº å°å·æ‰‹: åŒå¿—ï¼æ³¨æ„è§‚å¯Ÿå¢™è§’çš„æ ‡è¯­å¹´ä»½ï¼",
                "ğŸº å°å·æ‰‹: ç»„ç»‡å‘æ¥ç”µæŠ¥ï¼Œå¯†ç æœ¬å°±åœ¨æŸœå­é‡Œã€‚",
                "ğŸ“¨ é€šè®¯å‘˜: æ”¶åˆ°ä¸Šçº§æŒ‡ç¤ºï¼Œè¯·å°½å¿«å‰å¾€ä¾›é”€ç¤¾æ±‡åˆã€‚"
            ];
            const randomMsg = msgs[Math.floor(Math.random() * msgs.length)];
            document.getElementById('liaison-msg').innerText = randomMsg;
            logConsole(`Liaison: Hint triggered - "${randomMsg}"`);
        }

        function simPhotoMatch() {
            const bar = document.getElementById('match-bar');
            const scoreDisplay = document.getElementById('match-score');
            
            // Simulating API call
            logConsole('AI Service: Uploading image... Extracting Vectors...');
            
            bar.style.width = '10%';
            
            setTimeout(() => {
                const score = Math.floor(Math.random() * 30) + 70; // 70-99%
                bar.style.width = score + '%';
                scoreDisplay.innerText = score + '%';
                
                if (score > 75) {
                    bar.className = 'h-full bg-green-500 transition-all duration-1000';
                    logConsole(`AI Match: Success! Score ${score}% > Threshold 75%`);
                } else {
                    bar.className = 'h-full bg-red-500 transition-all duration-1000';
                    logConsole(`AI Match: Failed. Score ${score}% < Threshold 75%`);
                }
            }, 1000);
        }

        // --- 5. Business Chart ---
        const ctxRev = document.getElementById('revenueChart').getContext('2d');
        new Chart(ctxRev, {
            type: 'doughnut',
            data: {
                labels: ['é—¨ç¥¨æ”¶å…¥ (Tickets)', 'å†…è´­è§£é” (SKU)', 'SaaSå¹´è´¹ (B2B)', 'å‘¨è¾¹åˆ†æ¶¦'],
                datasets: [{
                    data: [40, 25, 25, 10],
                    backgroundColor: ['#ef4444', '#3b82f6', '#f59e0b', '#10b981'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom', labels: { boxWidth: 10, font: { size: 10 } } }
                }
            }
        });

    </script>
</body>
</html>